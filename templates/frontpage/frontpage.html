<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ролевые клубы на карте России</title>

    {?*head.assets="development"*}
    <script type="text/javascript" src="/frontend/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/frontend/leaflet/leaflet.js"></script>
    <link rel="stylesheet" href="/frontend/leaflet/leaflet.css" />

    <!-- danwild/leaflet-fa-markers -->
    <script type="text/javascript" src="/frontend/leaflet/L.Icon.FontAwesome.js"></script>
    <link rel="stylesheet" href="/frontend/leaflet/L.Icon.FontAwesome.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />

    <!-- marker clusters -->
    <link rel="stylesheet" href="/frontend/leaflet/MarkerCluster.css">
    <link rel="stylesheet" href="/frontend/leaflet/MarkerCluster.Default.css">
    <script type="text/javascript" src="/frontend/leaflet/leaflet.markercluster.js"></script>

    <script type="text/javascript" src="/frontend/leaflet/L.Control.Zoomslider.js"></script>
    <link rel="stylesheet" href="/frontend/leaflet/L.Control.Zoomslider.css" />

    <script type="text/javascript" src="/frontend/front.js"></script>
    <link rel="stylesheet" href="/frontend/front.css">

    <style type="text/css" id="css-main">
        html, body, #map {
            height:100%;
            width:100%;
            padding:0px;
            margin:0px;
        }
    </style>
    {?}
    {?*head.assets="production"*}
    <script type="text/javascript" src="/public/scripts.js"></script>
    <link rel="stylesheet" href="/public/styles.css">
    {?}

    <script type="text/javascript" id="data">
        var center = { lat: '{*center.lat*}', lng: '{*center.lng*}' };
        var clubs_list = [
            {%*clubs_list*}
            { id: {*clubs_list:id*}, lat: {*clubs_list:lat*}, lng: {*clubs_list:lng*} },
            {%}
        ];
    </script>

</head>
<body>

<div tabindex="0" class="leaflet-container leaflet-fade-anim leaflet-grab leaflet-touch-drag" id="map"></div>


<script type="text/javascript" id="main">
    $(function(){
        var map = __CreateMap("map", center, 12);

        createControl_AboutBox();
        createControl_InfoBox();

        map.addControl( new L.Control.AboutBox() );
        map.addControl( new L.Control.InfoBox() );

        var layer_ows = L.markerClusterGroup();
        layer_ows.addTo(map);

        $.each(clubs_list, function(index, data){
            let marker = L.marker([data.lat, data.lng], {
                icon: L.icon.fontAwesome({
                    iconClasses: 'fa fa-cubes', // cube, cubes, eyes, smile
                    markerColor: '#00a9ce',
                    iconColor: '#FFF',
                    iconXOffset: -4,
                    iconYOffset: -1,
                }),
                id: data.id
            }).on('click', function() {
                load_poi_content(this.options.id, "section-infobox-content");
            } );
            layer_ows.addLayer(marker);
        });

    });

</script>

<section id="section-infobox" class="section-infobox-wrapper invisible" data-leaflet-control-position="{*section.infobox_position*}">
    /*
    <div style="text-align: left">
        <button id="actor-section-infobox-toggle" class="section-infobox-button-toggle-visibility" data-content="section-info-content" data-content-visibility="false">Скрыть</button>
    </div> */
    <div id="section-infobox-content" class="section-infobox-content">

    </div>
</section>

<section id="section-about" class="section-about-wrapper invisible" data-leaflet-control-position="{*section.about_position*}">
    <div style="text-align: right">
        <button id="actor-about-toggle" class="action-toggle-div-visibility" data-content="section-about-wrapper" data-content-is-visible="false">Показать</button>
    </div>

    <div id="section-about-content" class="invisible section-about-content">
        ...
    </div>
</section>


</body>
</html>
